{% extends 'base.html' %}

{% block main %}
<div class="container mt-4">
    <h1 class="mb-4">Pedidos</h1>

    <div class="mb-2 d-flex justify-content-between">
        <a href="{% url 'pedidos_form' %}" class="btn btn-primary">
            <i class="bi bi-plus-circle"></i>  
            Nuevo Pedido
        </a>
    </div>

    <div class="table-responsive">  
        <table class="table table-striped table-hover"> 
            <thead class="table-dark">  
                <tr>
                    <th>Empleado</th>
                    <th>Comentario</th>
                    <th>Prioridad</th>
                    <th>Estado</th>
                    <th>Área</th>
                    <th>Técnico</th>
                    <th>ComentarioTécnico</th>
                    <th>Acciones</th> 
                </tr>
            </thead>

            <tbody>
                {% for ped in pedidos %}
                <tr>
                        <td>{{ ped.empleado }}</td>  
                        <td>{{ ped.comentario }}</td>
                        <td>{{ ped.prioridad }}</td>
                        <td>{{ ped.estado }}</td>
                        <td>{{ ped.area }}</td> 
                        <td>{{ ped.tecnico.nombre  }}</td>
                        <td>{{ ped.comenTecnico }}</td>
                        <td class="d-flex">  
                            <a class="btn btn-outline-primary me-2"  
                               href="{% url 'pedidos_edit' id=ped.id %}">
                               <i class="bi bi-pencil"></i>  
                               Editar
                            </a>
                            <form method="POST"
                                  action="{% url 'pedidos_delete' %}">
                                  {% csrf_token %}
                                  <input type="hidden" name="pedido_id" value="{{ ped.id }}" />
                                  <button type="submit" class="btn btn-outline-danger">
                                      <i class="bi bi-trash"></i>  
                                      Eliminar
                                  </button>
                            </form>
                        </td>
                </tr>
                {% empty %}
                    <tr>
                        <td colspan="8" class="text-center">  
                            No existen pedidos
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
